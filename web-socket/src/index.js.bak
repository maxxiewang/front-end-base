const { WebSocketServer } = require('ws')
const wsServer = new WebSocketServer({ port: 3000 })

wsServer.on('connection', (ws) => {
  ws.on('message', (msg) => {
    console.info('服务端:', msg.toString())

    // 服务端向客户端发送信息
    // const str = msg.toString('utf-8', 0, 100)
    setTimeout(() => {
      ws.send('服务端' + msg.toString())
    }, 0)
  })
})
